<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•´ì»¤ìŠ¤ ì˜ìƒ ì¶”ì  ë¹„ì„œ (ë©€í‹°)</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2b6bf3;
            --bg-color: #f0f4f8;
            --card-bg: #ffffff;
            --text-color: #333;
            --border-radius: 16px;
            --shadow: 0 4px 24px rgba(0, 0, 0, 0.06);
        }
        body {
            font-family: 'Apple SD Gothic Neo', 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 40px 20px;
            color: var(--text-color);
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .container { width: 100%; max-width: 900px; display: flex; flex-direction: column; gap: 20px; }
        .card { background: var(--card-bg); border-radius: var(--border-radius); box-shadow: var(--shadow); padding: 30px; }
        .header-section { text-align: center; margin-bottom: 25px; padding-bottom: 20px; border-bottom: 2px solid #f1f3f5; }
        .app-title { font-size: 26px; font-weight: 800; color: #1a1a1a; display: flex; align-items: center; justify-content: center; gap: 10px; }
        
        .section-label { font-size: 15px; font-weight: 700; color: #333; margin: 20px 0 10px 0; display: block; }
        .date-input { width: 100%; padding: 15px; border: 2px solid #cbd5e1; border-radius: 12px; font-size: 18px; text-align: center; box-sizing: border-box; outline: none; transition: 0.3s; }
        .date-input:focus { border-color: var(--primary-color); background: #f8faff; }

        .channel-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 8px; padding: 15px; border: 1px solid #eee; border-radius: 12px; background: #fff; }
        .channel-btn { background: #fff; border: 1px solid #dfe3e8; border-radius: 8px; padding: 10px 5px; font-size: 13px; color: #666; cursor: pointer; text-align: center; transition: all 0.2s; display: flex; align-items: center; justify-content: center; min-height: 45px; word-break: keep-all; }
        .channel-btn:hover { border-color: var(--primary-color); color: var(--primary-color); background: #f8faff; }
        .channel-btn.active { background: var(--primary-color); color: #fff; border-color: var(--primary-color); font-weight: 600; box-shadow: 0 3px 8px rgba(43, 107, 243, 0.3); }

        /* ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        #resultArea { margin-top: 25px; display: none; border-top: 2px solid #f1f3f5; padding-top: 25px; }
        .video-item { background: #fff; border: 1px solid #eee; border-radius: var(--border-radius); padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 12px rgba(0,0,0,0.03); }
        .video-title { font-size: 16px; font-weight: 700; margin-bottom: 12px; color: #1a1a1a; }
        .thumb-preview { width: 100%; max-width: 450px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #f1f3f5; }
        .action-group { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .action-btn { padding: 10px 16px; border-radius: 8px; border: none; font-size: 13px; font-weight: 600; cursor: pointer; display: flex; align-items: center; gap: 6px; transition: 0.2s; }
        .btn-link { background: #e7f0ff; color: var(--primary-color); }
        .btn-copy { background: #f1f3f5; color: #495057; }
        .btn-down { background: #e6fcf5; color: #099268; }
        .action-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }

        .loading { display: none; text-align: center; margin-top: 15px; color: var(--primary-color); font-weight: bold; }
        .count-info { margin-bottom: 15px; font-weight: bold; color: var(--primary-color); font-size: 14px; }
    </style>
</head>
<body>

<div class="container">
    <div class="card">
        <div class="header-section">
            <div class="app-title">
                <i class="fa-brands fa-youtube" style="color:#ff0000;"></i> í•´ì»¤ìŠ¤ ì˜ìƒ ì¶”ì  ë¹„ì„œ
            </div>
        </div>

        <div class="date-input-container">
            <span class="section-label">1. ì—…ë¡œë“œ ë‚ ì§œ ì…ë ¥</span>
            <input type="text" id="dateInput" class="date-input" placeholder="YYMMDD (ì˜ˆ: 230509)" maxlength="6">
        </div>

        <span class="section-label">2. ì±„ë„ ì„ íƒ</span>
        <div class="channel-grid" id="channelGrid"></div>

        <div id="loading" class="loading">
            <i class="fa-solid fa-spinner fa-spin"></i> ë°•ì‚¬ë‹˜, ì˜¤ëŠ˜ì˜ ì˜ìƒë“¤ì„ ì°¾ê³  ìˆìŠµë‹ˆë‹¤...
        </div>

        <div id="resultArea">
            <div id="countInfo" class="count-info"></div>
            <div id="videoList"></div>
        </div>
    </div>
</div>

<script>
    const FIXED_API_KEY = 'AIzaSyAmTWQGwdwtj87FLv6JNXIAPnT1bO9-yOQ'; 

    const channels = {
        "í•´ì»¤ìŠ¤ í† ìµ": "UCTdflp7iCb0qj61On66yOAw", "í•´ì»¤ìŠ¤ì¡": "UCjhD0iUV1qyRJoLkwM3ignA", "í•´ì»¤ìŠ¤ê³µë¬´ì›": "UCcDz72Vic8ILPpIhcFWdkvA",
        "ê³µì¸ì¤‘ê°œì‚¬": "UCdtvVo04Fn1gXe38HSszbnw", "í•´ì»¤ìŠ¤ê²½ì°°": "UCH4YqIY3Gi_l-qbf_Lj2f3w", "ê¹€ì§„íƒœ í† ìµ": "UCW2iaEZAlpZ48jBV7Cxuoxg",
        "êµ¬ìì—° í† ìµ": "UCeRI1uV1_5iS-cM37LvoWOw", "í† ìŠ¤&ì˜¤í”½": "UCWVqJF4TEzCscyOT_uITrmg", "ë¯¼ì§€ì› í† ìµ": "UCE1Qsm2_IFyJfhFtcbBCAeg",
        "í•œë‚˜ í† ìµ": "UCG-EcAtKyA4Zful5VD_pv8A", "ë¡œìŠ¤ì¿¨Â·ë³€í˜¸ì‚¬": "UCNxyohrWP0-4J7aL2AzHT0A", "ê°í‰ì‚¬&í–‰ì •ì‚¬": "UC6JhVkziP3BOqsaJeJ8cMDw",
        "í•´ì»¤ìŠ¤ PSAT": "UCB7dVWW1HajiZOqACiTrgwg", "í•´ì»¤ìŠ¤ ê²½ì˜": "UCMO38w-Zkx_6a-AyDrITq1A", "í•´ì»¤ìŠ¤ ê¸ˆìœµ": "UCj_bvSTgaEwMfg1NpAMY0ig",
        "í•´ì»¤ìŠ¤ì†Œë°©": "UCG2BAw5mjP7MXoJJroUYbDw", "í•´ì»¤ìŠ¤ ìœ í•™": "UCYybN6xbo2rtdb7XGqYK_-A", "í•´ì»¤ìŠ¤ ì¼ë³¸ì–´": "UCVsW_QS-bzIVDMChrRuBxPA",
        "í•´ì»¤ìŠ¤ ì„ìš©": "UC52CZiUrhsKJX7t5bE8ZQ2Q", "í•´ì»¤ìŠ¤ ìê²©ì¦": "UC4REETmYtlvqHunx2tl2Pmg", "í•´ì»¤ìŠ¤ ì¤‘êµ­ì–´": "UCBARjw2l2cbTzxQLIYwFm6w",
        "í•´ì»¤ìŠ¤í†¡": "UCmjwMlVeo5DoH8xCmMQlVgA", "í•´ì»¤ìŠ¤ í¸ì…": "UCoLlc4K-jpTorSHvwH9cEQQ", "í•´ì»¤ìŠ¤ í•œêµ­ì‚¬": "UCVeKJzXoDRBdmcUoe8i09PA"
    };

    window.onload = function() {
        const container = document.getElementById('channelGrid');
        Object.entries(channels).sort().forEach(([name, id]) => {
            const btn = document.createElement('div');
            btn.className = 'channel-btn';
            btn.innerHTML = `<span>${name}</span>`;
            btn.onclick = () => fetchVideos(id, btn);
            container.appendChild(btn);
        });
    };

async function fetchVideos(channelId, btn) {
    const dateRaw = document.getElementById('dateInput').value;
    if (dateRaw.length !== 6) { alert("ë‚ ì§œ 6ìë¦¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!"); return; }
    
    document.querySelectorAll('.channel-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const loading = document.getElementById('loading');
    const resultArea = document.getElementById('resultArea');
    const videoList = document.getElementById('videoList');
    const countInfo = document.getElementById('countInfo');

    loading.style.display = 'block';
    resultArea.style.display = 'none';
    videoList.innerHTML = '';

    const uploadsPlaylistId = 'UU' + channelId.substring(2);
    const targetDate = `20${dateRaw.substring(0, 2)}-${dateRaw.substring(2, 4)}-${dateRaw.substring(4, 6)}`;
    
    let nextPageToken = "";
    let foundVideos = [];
    let pageCount = 0;
    const maxPages = 20; // ìµœëŒ€ 20í˜ì´ì§€(1000ê°œ ì˜ìƒ)ê¹Œì§€ ë’¤ì§‘ë‹ˆë‹¤.

    try {
        // ë‚ ì§œë¥¼ ì°¾ê±°ë‚˜ ìµœëŒ€ í˜ì´ì§€ì— ë„ë‹¬í•  ë•Œê¹Œì§€ ë°˜ë³µ
        while (pageCount < maxPages) {
            const url = `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${uploadsPlaylistId}&key=${FIXED_API_KEY}&maxResults=50&pageToken=${nextPageToken}`;
            const res = await fetch(url);
            const data = await res.json();

            if (!data.items || data.items.length === 0) break;

            // í•´ë‹¹ ë‚ ì§œ ì˜ìƒ í•„í„°ë§
            const matches = data.items.filter(item => item.snippet.publishedAt.substring(0, 10) === targetDate);
            foundVideos = foundVideos.concat(matches);

            // ëª©ë¡ì˜ ë§ˆì§€ë§‰ ì˜ìƒ ë‚ ì§œê°€ ëª©í‘œ ë‚ ì§œë³´ë‹¤ ì´ì „ì´ë©´ ë” ì´ìƒ ì°¾ì„ í•„ìš” ì—†ìŒ
            const lastDate = data.items[data.items.length - 1].snippet.publishedAt.substring(0, 10);
            if (lastDate < targetDate) break;

            nextPageToken = data.nextPageToken;
            if (!nextPageToken) break;
            pageCount++;
        }

        if (foundVideos.length > 0) {
            countInfo.innerText = `ì´ ${foundVideos.length}ê°œì˜ ì˜ìƒì„ ì°¾ì•˜ìŠµë‹ˆë‹¤.`;
            foundVideos.forEach(item => {
                const vId = item.snippet.resourceId.videoId;
                const title = item.snippet.title;
                const thumb = item.snippet.thumbnails.high.url.replace("hqdefault", "maxresdefault");
                
                const videoCard = document.createElement('div');
                videoCard.className = 'video-item';
                videoCard.innerHTML = `
                    <div class="video-title">${title}</div>
                    <img class="thumb-preview" src="${thumb}">
                    <div class="action-group">
                        <button onclick="copyTxt('https://youtu.be/${vId}')" class="action-btn btn-link"><i class="fa-solid fa-link"></i> ë§í¬ ë³µì‚¬</button>
                        <button onclick="copyImg('${thumb}')" class="action-btn btn-copy"><i class="fa-solid fa-image"></i> ì¸ë„¤ì¼ ë³µì‚¬</button>
                        <button onclick="downImg('${thumb}', '${dateRaw}', '${vId}')" class="action-btn btn-down"><i class="fa-solid fa-download"></i> ë‹¤ìš´ë¡œë“œ</button>
                    </div>
                `;
                videoList.appendChild(videoCard);
            });
            resultArea.style.display = 'block';
        } else {
            alert("ì…ë ¥í•˜ì‹  ë‚ ì§œì˜ ì˜ìƒì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. (ìµœê·¼ 1000ê°œ ì˜ìƒ ì¡°ì‚¬ ì™„ë£Œ)");
        }
    } catch (e) {
        alert("ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
    } finally {
        loading.style.display = 'none';
    }
}
// 1. ë§í¬ ë³µì‚¬ ê¸°ëŠ¥
    async function copyTxt(txt) {
        try {
            await navigator.clipboard.writeText(txt);
            alert("âœ… ì˜ìƒ ë§í¬ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
        } catch (err) {
            alert("âŒ ë§í¬ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
    }

    // 2. ì¸ë„¤ì¼ ì´ë¯¸ì§€ ë³µì‚¬ ê¸°ëŠ¥ (Ctrl+Vìš©)
    async function copyImg(url) {
        try {
            const res = await fetch(url);
            const blob = await res.blob();
            // ì´ë¯¸ì§€ íƒ€ì…ì— ë§ê²Œ í´ë¦½ë³´ë“œì— ì“°ê¸°
            await navigator.clipboard.write([
                new ClipboardItem({ [blob.type]: blob })
            ]);
            alert("ğŸ–¼ï¸ ì¸ë„¤ì¼ ì´ë¯¸ì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
        } catch (e) {
            console.error(e);
            alert("âŒ ì´ë¯¸ì§€ ë³µì‚¬ ì‹¤íŒ¨ (ë¸Œë¼ìš°ì € ë³´ì•ˆ ì„¤ì •ì´ë‚˜ ì €í™”ì§ˆ ì´ë¯¸ì§€ê°€ ì›ì¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ì´ìš©í•´ì£¼ì„¸ìš”!)");
        }
    }

    // 3. ì¸ë„¤ì¼ íŒŒì¼ ë‹¤ìš´ë¡œë“œ ê¸°ëŠ¥
    async function downImg(url, date, id) {
        try {
            const res = await fetch(url);
            const blob = await res.blob();
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            // íŒŒì¼ëª… ì˜ˆì˜ê²Œ ì •ë¦¬: thumb_230509_ì˜ìƒID.jpg
            link.download = `thumb_${date}_${id}.jpg`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(link.href);
        } catch (e) {
            alert("âŒ ë‹¤ìš´ë¡œë“œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        }
    }
    
    // ... (ì´í•˜ copyTxt, copyImg, downImg í•¨ìˆ˜ëŠ” ê¸°ì¡´ê³¼ ë™ì¼)
</script>
</body>
</html>
